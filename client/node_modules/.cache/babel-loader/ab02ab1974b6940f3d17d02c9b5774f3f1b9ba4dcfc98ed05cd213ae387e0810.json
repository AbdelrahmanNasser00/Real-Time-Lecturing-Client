{"ast":null,"code":"import*as api from\"../../api\";import{openAlertMessage}from\"./alertActions\";export const authActions={SET_USER_DETAILS:\"AUTH.SET_USER_DETAILS\",SET_UNVERIFIED_USER_DETAILS:\"AUTH.SET_UNVERIFIED_USER_DETAILS\"};export const getActions=dispatch=>{return{login:(userDetails,history)=>dispatch(login(userDetails,history)),register:userDetails=>dispatch(register(userDetails)),verify:(userDetails,history)=>dispatch(verify(userDetails,history)),setUserDetails:userDetails=>dispatch(setUserDetails(userDetails))};};const setUserDetails=userDetails=>{return{type:authActions.SET_USER_DETAILS,userDetails};};const setUnverifiedUserDetails=userDetails=>{return{type:authActions.SET_UNVERIFIED_USER_DETAILS,userDetails};};const login=(userDetails,history)=>{return async dispatch=>{const response=await api.login(userDetails);console.log(response);if(response.error){var _response$exception,_response$exception$r;dispatch(openAlertMessage(response===null||response===void 0?void 0:(_response$exception=response.exception)===null||_response$exception===void 0?void 0:(_response$exception$r=_response$exception.response)===null||_response$exception$r===void 0?void 0:_response$exception$r.data));}else{const{userDetails}=response===null||response===void 0?void 0:response.data;localStorage.setItem(\"user\",JSON.stringify(userDetails));dispatch(setUserDetails(userDetails));history.push(\"/dashboard\");}};};const register=userDetails=>{return async dispatch=>{const response=await api.register(userDetails);console.log(response);if(response.error){var _response$exception2,_response$exception2$;dispatch(openAlertMessage(response===null||response===void 0?void 0:(_response$exception2=response.exception)===null||_response$exception2===void 0?void 0:(_response$exception2$=_response$exception2.response)===null||_response$exception2$===void 0?void 0:_response$exception2$.data));}else{const{userDetails}=response===null||response===void 0?void 0:response.data;localStorage.setItem(\"unverifiedUser\",JSON.stringify(userDetails));console.log(\"register actoin\",localStorage.getItem(\"unverifiedUser\"));dispatch(setUnverifiedUserDetails(userDetails));}};};const verify=(userDetails,history)=>{return async dispatch=>{const response=await api.verify(userDetails);console.log(response);if(response.error){var _response$exception3,_response$exception3$;dispatch(openAlertMessage(response===null||response===void 0?void 0:(_response$exception3=response.exception)===null||_response$exception3===void 0?void 0:(_response$exception3$=_response$exception3.response)===null||_response$exception3$===void 0?void 0:_response$exception3$.data));}else{const{userDetails}=response===null||response===void 0?void 0:response.data;localStorage.setItem(\"user\",JSON.stringify(userDetails));console.log(\"verified\",userDetails);dispatch(setUserDetails(userDetails));history.push(\"/dashboard\");}};};","map":{"version":3,"names":["api","openAlertMessage","authActions","SET_USER_DETAILS","SET_UNVERIFIED_USER_DETAILS","getActions","dispatch","login","userDetails","history","register","verify","setUserDetails","type","setUnverifiedUserDetails","response","console","log","error","_response$exception","_response$exception$r","exception","data","localStorage","setItem","JSON","stringify","push","_response$exception2","_response$exception2$","getItem","_response$exception3","_response$exception3$"],"sources":["/media/alaa-eldeen/D/Real-Time-Lecturing/Real-Time-Lecturing-Client/client/src/store/actions/authActions.js"],"sourcesContent":["import * as api from \"../../api\";\r\nimport { openAlertMessage } from \"./alertActions\";\r\n\r\nexport const authActions = {\r\n  SET_USER_DETAILS: \"AUTH.SET_USER_DETAILS\",\r\n  SET_UNVERIFIED_USER_DETAILS: \"AUTH.SET_UNVERIFIED_USER_DETAILS\",\r\n};\r\n\r\nexport const getActions = (dispatch) => {\r\n  return {\r\n    login: (userDetails, history) => dispatch(login(userDetails, history)),\r\n    register: (userDetails) => dispatch(register(userDetails)),\r\n    verify: (userDetails, history) => dispatch(verify(userDetails, history)),\r\n    setUserDetails: (userDetails) => dispatch(setUserDetails(userDetails)),\r\n  };\r\n};\r\n\r\nconst setUserDetails = (userDetails) => {\r\n  return {\r\n    type: authActions.SET_USER_DETAILS,\r\n    userDetails,\r\n  };\r\n};\r\n\r\nconst setUnverifiedUserDetails = (userDetails) => {\r\n  return {\r\n    type: authActions.SET_UNVERIFIED_USER_DETAILS,\r\n    userDetails,\r\n  };\r\n};\r\nconst login = (userDetails, history) => {\r\n  return async (dispatch) => {\r\n    const response = await api.login(userDetails);\r\n    console.log(response);\r\n    if (response.error) {\r\n      dispatch(openAlertMessage(response?.exception?.response?.data));\r\n    } else {\r\n      const { userDetails } = response?.data;\r\n      localStorage.setItem(\"user\", JSON.stringify(userDetails));\r\n\r\n      dispatch(setUserDetails(userDetails));\r\n      history.push(\"/dashboard\");\r\n    }\r\n  };\r\n};\r\n\r\nconst register = (userDetails) => {\r\n  return async (dispatch) => {\r\n    const response = await api.register(userDetails);\r\n    console.log(response);\r\n    if (response.error) {\r\n      dispatch(openAlertMessage(response?.exception?.response?.data));\r\n    } else {\r\n      const { userDetails } = response?.data;\r\n      localStorage.setItem(\"unverifiedUser\", JSON.stringify(userDetails));\r\n      console.log(\"register actoin\", localStorage.getItem(\"unverifiedUser\"));\r\n      dispatch(setUnverifiedUserDetails(userDetails));\r\n    }\r\n  };\r\n};\r\n\r\nconst verify = (userDetails, history) => {\r\n  return async (dispatch) => {\r\n    const response = await api.verify(userDetails);\r\n    console.log(response);\r\n    if (response.error) {\r\n      dispatch(openAlertMessage(response?.exception?.response?.data));\r\n    } else {\r\n      const { userDetails } = response?.data;\r\n\r\n      localStorage.setItem(\"user\", JSON.stringify(userDetails));\r\n      console.log(\"verified\", userDetails);\r\n      dispatch(setUserDetails(userDetails));\r\n      history.push(\"/dashboard\");\r\n    }\r\n  };\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}