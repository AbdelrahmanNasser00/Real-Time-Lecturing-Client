{"ast":null,"code":"import * as api from \"../../api\";\nimport { openAlertMessage } from \"./alertActions\";\nexport const authActions = {\n  SET_USER_DETAILS: \"AUTH.SET_USER_DETAILS\",\n  SET_UNVERIFIED_USER_DETAILS: \"AUTH.SET_UNVERIFIED_USER_DETAILS\"\n};\nexport const getActions = dispatch => {\n  return {\n    login: (userDetails, history) => dispatch(login(userDetails, history)),\n    register: userDetails => dispatch(register(userDetails)),\n    verify: (userDetails, history) => dispatch(verify(userDetails, history)),\n    setUserDetails: userDetails => dispatch(setUserDetails(userDetails))\n  };\n};\nconst setUserDetails = userDetails => {\n  return {\n    type: authActions.SET_USER_DETAILS,\n    userDetails\n  };\n};\nconst setUnverifiedUserDetails = userDetails => {\n  return {\n    type: authActions.SET_UNVERIFIED_USER_DETAILS,\n    userDetails\n  };\n};\nconst login = (userDetails, history) => {\n  return async dispatch => {\n    const Swal = require(\"sweetalert2\");\n    if (!navigator.onLine) {\n      Swal.fire({\n        icon: \"error\",\n        title: \"No Internet Connection\",\n        text: \"Please check your internet connection and try again.\"\n      });\n      return;\n    }\n    try {\n      const response = await api.login(userDetails);\n      console.log(response);\n      if (response.error) {\n        var _response$exception, _response$exception$r;\n        dispatch(openAlertMessage(response === null || response === void 0 ? void 0 : (_response$exception = response.exception) === null || _response$exception === void 0 ? void 0 : (_response$exception$r = _response$exception.response) === null || _response$exception$r === void 0 ? void 0 : _response$exception$r.data));\n      } else {\n        const {\n          userDetails\n        } = response === null || response === void 0 ? void 0 : response.data;\n        localStorage.setItem(\"user\", JSON.stringify(userDetails));\n        dispatch(setUserDetails(userDetails));\n        Swal.fire({\n          title: `Welcome Back, ${userDetails.username}!`,\n          text: \"You logged in successfully!\",\n          icon: \"success\"\n        }).then(() => {\n          setTimeout(() => {\n            window.location.href = \"/dashboard\";\n          }, 500);\n        });\n      }\n    } catch (error) {\n      Swal.fire({\n        icon: \"error\",\n        title: \"Server Error\",\n        text: \"Unable to connect to the server. Please try again later.\"\n      });\n    }\n  };\n};\nconst register = userDetails => {\n  return async dispatch => {\n    const response = await api.register(userDetails);\n    console.log(response);\n    if (response.error) {\n      var _response$exception2, _response$exception2$;\n      dispatch(openAlertMessage(response === null || response === void 0 ? void 0 : (_response$exception2 = response.exception) === null || _response$exception2 === void 0 ? void 0 : (_response$exception2$ = _response$exception2.response) === null || _response$exception2$ === void 0 ? void 0 : _response$exception2$.data));\n    } else {\n      const {\n        userDetails\n      } = response === null || response === void 0 ? void 0 : response.data;\n      localStorage.setItem(\"unverifiedUser\", JSON.stringify(userDetails));\n      console.log(\"register actoin\", localStorage.getItem(\"unverifiedUser\"));\n      dispatch(setUnverifiedUserDetails(userDetails));\n    }\n  };\n};\nconst verify = (userDetails, history) => {\n  return async dispatch => {\n    const Swal = require(\"sweetalert2\");\n    const response = await api.verify(userDetails);\n    console.log(response);\n    if (response.error) {\n      var _response$exception3, _response$exception3$;\n      Swal.fire({\n        icon: \"error\",\n        title: \"Oops...\",\n        text: `${response === null || response === void 0 ? void 0 : (_response$exception3 = response.exception) === null || _response$exception3 === void 0 ? void 0 : (_response$exception3$ = _response$exception3.response) === null || _response$exception3$ === void 0 ? void 0 : _response$exception3$.data}`\n      });\n    } else {\n      const {\n        userDetails\n      } = response === null || response === void 0 ? void 0 : response.data;\n      localStorage.setItem(\"user\", JSON.stringify(userDetails));\n      console.log(\"verified\", userDetails);\n      dispatch(setUserDetails(userDetails));\n      Swal.fire({\n        title: `Success`,\n        text: `${userDetails.username}, You have successfully registred!`,\n        icon: \"success\"\n      }).then(() => {\n        setTimeout(() => {\n          window.location.href = \"/dashboard\";\n        }, 500);\n      });\n      history.push(\"/dashboard\");\n    }\n  };\n};","map":{"version":3,"names":["api","openAlertMessage","authActions","SET_USER_DETAILS","SET_UNVERIFIED_USER_DETAILS","getActions","dispatch","login","userDetails","history","register","verify","setUserDetails","type","setUnverifiedUserDetails","Swal","require","navigator","onLine","fire","icon","title","text","response","console","log","error","_response$exception","_response$exception$r","exception","data","localStorage","setItem","JSON","stringify","username","then","setTimeout","window","location","href","_response$exception2","_response$exception2$","getItem","_response$exception3","_response$exception3$","push"],"sources":["/home/abdelrahman/Realtime-project/client/Real-Time-Lecturing-Client/client/src/store/actions/authActions.js"],"sourcesContent":["import * as api from \"../../api\";\r\nimport { openAlertMessage } from \"./alertActions\";\r\n\r\nexport const authActions = {\r\n  SET_USER_DETAILS: \"AUTH.SET_USER_DETAILS\",\r\n  SET_UNVERIFIED_USER_DETAILS: \"AUTH.SET_UNVERIFIED_USER_DETAILS\",\r\n};\r\n\r\nexport const getActions = (dispatch) => {\r\n  return {\r\n    login: (userDetails, history) => dispatch(login(userDetails, history)),\r\n    register: (userDetails) => dispatch(register(userDetails)),\r\n    verify: (userDetails, history) => dispatch(verify(userDetails, history)),\r\n    setUserDetails: (userDetails) => dispatch(setUserDetails(userDetails)),\r\n  };\r\n};\r\n\r\nconst setUserDetails = (userDetails) => {\r\n  return {\r\n    type: authActions.SET_USER_DETAILS,\r\n    userDetails,\r\n  };\r\n};\r\n\r\nconst setUnverifiedUserDetails = (userDetails) => {\r\n  return {\r\n    type: authActions.SET_UNVERIFIED_USER_DETAILS,\r\n    userDetails,\r\n  };\r\n};\r\nconst login = (userDetails, history) => {\r\n  return async (dispatch) => {\r\n    const Swal = require(\"sweetalert2\");\r\n\r\n    if (!navigator.onLine) {\r\n      Swal.fire({\r\n        icon: \"error\",\r\n        title: \"No Internet Connection\",\r\n        text: \"Please check your internet connection and try again.\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await api.login(userDetails);\r\n      console.log(response);\r\n\r\n      if (response.error) {\r\n        dispatch(openAlertMessage(response?.exception?.response?.data));\r\n      } else {\r\n        const { userDetails } = response?.data;\r\n        localStorage.setItem(\"user\", JSON.stringify(userDetails));\r\n        dispatch(setUserDetails(userDetails));\r\n        Swal.fire({\r\n          title: `Welcome Back, ${userDetails.username}!`,\r\n          text: \"You logged in successfully!\",\r\n          icon: \"success\",\r\n        }).then(() => {\r\n          setTimeout(() => {\r\n            window.location.href = \"/dashboard\";\r\n          }, 500);\r\n        });\r\n      }\r\n    } catch (error) {\r\n      Swal.fire({\r\n        icon: \"error\",\r\n        title: \"Server Error\",\r\n        text: \"Unable to connect to the server. Please try again later.\",\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nconst register = (userDetails) => {\r\n  return async (dispatch) => {\r\n    const response = await api.register(userDetails);\r\n    console.log(response);\r\n    if (response.error) {\r\n      dispatch(openAlertMessage(response?.exception?.response?.data));\r\n    } else {\r\n      const { userDetails } = response?.data;\r\n      localStorage.setItem(\"unverifiedUser\", JSON.stringify(userDetails));\r\n      console.log(\"register actoin\", localStorage.getItem(\"unverifiedUser\"));\r\n      dispatch(setUnverifiedUserDetails(userDetails));\r\n    }\r\n  };\r\n};\r\n\r\nconst verify = (userDetails, history) => {\r\n  return async (dispatch) => {\r\n    const Swal = require(\"sweetalert2\");\r\n    const response = await api.verify(userDetails);\r\n    console.log(response);\r\n    if (response.error) {\r\n      Swal.fire({\r\n        icon: \"error\",\r\n        title: \"Oops...\",\r\n        text: `${response?.exception?.response?.data}`,\r\n      });\r\n    } else {\r\n      const { userDetails } = response?.data;\r\n      localStorage.setItem(\"user\", JSON.stringify(userDetails));\r\n      console.log(\"verified\", userDetails);\r\n      dispatch(setUserDetails(userDetails));\r\n      Swal.fire({\r\n        title: `Success`,\r\n        text: `${userDetails.username}, You have successfully registred!`,\r\n        icon: \"success\",\r\n      }).then(() => {\r\n        setTimeout(() => {\r\n          window.location.href = \"/dashboard\";\r\n        }, 500);\r\n      });\r\n      history.push(\"/dashboard\");\r\n    }\r\n  };\r\n};\r\n"],"mappings":"AAAA,OAAO,KAAKA,GAAG,MAAM,WAAW;AAChC,SAASC,gBAAgB,QAAQ,gBAAgB;AAEjD,OAAO,MAAMC,WAAW,GAAG;EACzBC,gBAAgB,EAAE,uBAAuB;EACzCC,2BAA2B,EAAE;AAC/B,CAAC;AAED,OAAO,MAAMC,UAAU,GAAIC,QAAQ,IAAK;EACtC,OAAO;IACLC,KAAK,EAAEA,CAACC,WAAW,EAAEC,OAAO,KAAKH,QAAQ,CAACC,KAAK,CAACC,WAAW,EAAEC,OAAO,CAAC,CAAC;IACtEC,QAAQ,EAAGF,WAAW,IAAKF,QAAQ,CAACI,QAAQ,CAACF,WAAW,CAAC,CAAC;IAC1DG,MAAM,EAAEA,CAACH,WAAW,EAAEC,OAAO,KAAKH,QAAQ,CAACK,MAAM,CAACH,WAAW,EAAEC,OAAO,CAAC,CAAC;IACxEG,cAAc,EAAGJ,WAAW,IAAKF,QAAQ,CAACM,cAAc,CAACJ,WAAW,CAAC;EACvE,CAAC;AACH,CAAC;AAED,MAAMI,cAAc,GAAIJ,WAAW,IAAK;EACtC,OAAO;IACLK,IAAI,EAAEX,WAAW,CAACC,gBAAgB;IAClCK;EACF,CAAC;AACH,CAAC;AAED,MAAMM,wBAAwB,GAAIN,WAAW,IAAK;EAChD,OAAO;IACLK,IAAI,EAAEX,WAAW,CAACE,2BAA2B;IAC7CI;EACF,CAAC;AACH,CAAC;AACD,MAAMD,KAAK,GAAGA,CAACC,WAAW,EAAEC,OAAO,KAAK;EACtC,OAAO,MAAOH,QAAQ,IAAK;IACzB,MAAMS,IAAI,GAAGC,OAAO,CAAC,aAAa,CAAC;IAEnC,IAAI,CAACC,SAAS,CAACC,MAAM,EAAE;MACrBH,IAAI,CAACI,IAAI,CAAC;QACRC,IAAI,EAAE,OAAO;QACbC,KAAK,EAAE,wBAAwB;QAC/BC,IAAI,EAAE;MACR,CAAC,CAAC;MACF;IACF;IAEA,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMvB,GAAG,CAACO,KAAK,CAACC,WAAW,CAAC;MAC7CgB,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;MAErB,IAAIA,QAAQ,CAACG,KAAK,EAAE;QAAA,IAAAC,mBAAA,EAAAC,qBAAA;QAClBtB,QAAQ,CAACL,gBAAgB,CAACsB,QAAQ,aAARA,QAAQ,wBAAAI,mBAAA,GAARJ,QAAQ,CAAEM,SAAS,cAAAF,mBAAA,wBAAAC,qBAAA,GAAnBD,mBAAA,CAAqBJ,QAAQ,cAAAK,qBAAA,uBAA7BA,qBAAA,CAA+BE,IAAI,CAAC,CAAC;MACjE,CAAC,MAAM;QACL,MAAM;UAAEtB;QAAY,CAAC,GAAGe,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEO,IAAI;QACtCC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAAC1B,WAAW,CAAC,CAAC;QACzDF,QAAQ,CAACM,cAAc,CAACJ,WAAW,CAAC,CAAC;QACrCO,IAAI,CAACI,IAAI,CAAC;UACRE,KAAK,EAAG,iBAAgBb,WAAW,CAAC2B,QAAS,GAAE;UAC/Cb,IAAI,EAAE,6BAA6B;UACnCF,IAAI,EAAE;QACR,CAAC,CAAC,CAACgB,IAAI,CAAC,MAAM;UACZC,UAAU,CAAC,MAAM;YACfC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,YAAY;UACrC,CAAC,EAAE,GAAG,CAAC;QACT,CAAC,CAAC;MACJ;IACF,CAAC,CAAC,OAAOd,KAAK,EAAE;MACdX,IAAI,CAACI,IAAI,CAAC;QACRC,IAAI,EAAE,OAAO;QACbC,KAAK,EAAE,cAAc;QACrBC,IAAI,EAAE;MACR,CAAC,CAAC;IACJ;EACF,CAAC;AACH,CAAC;AAED,MAAMZ,QAAQ,GAAIF,WAAW,IAAK;EAChC,OAAO,MAAOF,QAAQ,IAAK;IACzB,MAAMiB,QAAQ,GAAG,MAAMvB,GAAG,CAACU,QAAQ,CAACF,WAAW,CAAC;IAChDgB,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;IACrB,IAAIA,QAAQ,CAACG,KAAK,EAAE;MAAA,IAAAe,oBAAA,EAAAC,qBAAA;MAClBpC,QAAQ,CAACL,gBAAgB,CAACsB,QAAQ,aAARA,QAAQ,wBAAAkB,oBAAA,GAARlB,QAAQ,CAAEM,SAAS,cAAAY,oBAAA,wBAAAC,qBAAA,GAAnBD,oBAAA,CAAqBlB,QAAQ,cAAAmB,qBAAA,uBAA7BA,qBAAA,CAA+BZ,IAAI,CAAC,CAAC;IACjE,CAAC,MAAM;MACL,MAAM;QAAEtB;MAAY,CAAC,GAAGe,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEO,IAAI;MACtCC,YAAY,CAACC,OAAO,CAAC,gBAAgB,EAAEC,IAAI,CAACC,SAAS,CAAC1B,WAAW,CAAC,CAAC;MACnEgB,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEM,YAAY,CAACY,OAAO,CAAC,gBAAgB,CAAC,CAAC;MACtErC,QAAQ,CAACQ,wBAAwB,CAACN,WAAW,CAAC,CAAC;IACjD;EACF,CAAC;AACH,CAAC;AAED,MAAMG,MAAM,GAAGA,CAACH,WAAW,EAAEC,OAAO,KAAK;EACvC,OAAO,MAAOH,QAAQ,IAAK;IACzB,MAAMS,IAAI,GAAGC,OAAO,CAAC,aAAa,CAAC;IACnC,MAAMO,QAAQ,GAAG,MAAMvB,GAAG,CAACW,MAAM,CAACH,WAAW,CAAC;IAC9CgB,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;IACrB,IAAIA,QAAQ,CAACG,KAAK,EAAE;MAAA,IAAAkB,oBAAA,EAAAC,qBAAA;MAClB9B,IAAI,CAACI,IAAI,CAAC;QACRC,IAAI,EAAE,OAAO;QACbC,KAAK,EAAE,SAAS;QAChBC,IAAI,EAAG,GAAEC,QAAQ,aAARA,QAAQ,wBAAAqB,oBAAA,GAARrB,QAAQ,CAAEM,SAAS,cAAAe,oBAAA,wBAAAC,qBAAA,GAAnBD,oBAAA,CAAqBrB,QAAQ,cAAAsB,qBAAA,uBAA7BA,qBAAA,CAA+Bf,IAAK;MAC/C,CAAC,CAAC;IACJ,CAAC,MAAM;MACL,MAAM;QAAEtB;MAAY,CAAC,GAAGe,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEO,IAAI;MACtCC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAAC1B,WAAW,CAAC,CAAC;MACzDgB,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEjB,WAAW,CAAC;MACpCF,QAAQ,CAACM,cAAc,CAACJ,WAAW,CAAC,CAAC;MACrCO,IAAI,CAACI,IAAI,CAAC;QACRE,KAAK,EAAG,SAAQ;QAChBC,IAAI,EAAG,GAAEd,WAAW,CAAC2B,QAAS,oCAAmC;QACjEf,IAAI,EAAE;MACR,CAAC,CAAC,CAACgB,IAAI,CAAC,MAAM;QACZC,UAAU,CAAC,MAAM;UACfC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,YAAY;QACrC,CAAC,EAAE,GAAG,CAAC;MACT,CAAC,CAAC;MACF/B,OAAO,CAACqC,IAAI,CAAC,YAAY,CAAC;IAC5B;EACF,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}