{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport * as api from \"../api\";\nimport { openAlertMessage } from \"./alertSlice\";\nexport const authSlice = createSlice({\n  name: \"auth\",\n  initialState: {\n    userDetails: null,\n    error: null,\n    loading: false\n  },\n  reducers: {\n    setUserDetails: (state, action) => {\n      state.setUserDetails = action.payload;\n    },\n    setUnverifiedUserDetails: (state, action) => {\n      state.setVerifiedUserDetails = action.payload;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(login.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(login.fulfilled, (state, action) => {\n      state.loading = false;\n      state.userDetails = action.payload;\n    }).addCase(login.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.error.message;\n    });\n  }\n});\nexport const login = createAsyncThunk(\"auth/login\", async ({\n  userDetails,\n  history\n}, {\n  dispatch\n}) => {\n  const response = await api.login(userDetails);\n  if (response.error) {\n    var _response$exception, _response$exception$r;\n    dispatch(openAlertMessage(response === null || response === void 0 ? void 0 : (_response$exception = response.exception) === null || _response$exception === void 0 ? void 0 : (_response$exception$r = _response$exception.response) === null || _response$exception$r === void 0 ? void 0 : _response$exception$r.data));\n  } else {\n    const {\n      userDetails\n    } = response === null || response === void 0 ? void 0 : response.data;\n    localStorage.setItem(\"user\", JSON.stringify(userDetails));\n    dispatch(setUserDetails(userDetails));\n    history.push(\"/dashboard\");\n  }\n});\nexport const register = createAsyncThunk(\"auth/register\", async (userDetails, {\n  dispatch\n}) => {\n  const response = await api.register(userDetails);\n  if (response.error) {\n    var _response$exception2, _response$exception2$;\n    dispatch(openAlertMessage(response === null || response === void 0 ? void 0 : (_response$exception2 = response.exception) === null || _response$exception2 === void 0 ? void 0 : (_response$exception2$ = _response$exception2.response) === null || _response$exception2$ === void 0 ? void 0 : _response$exception2$.data));\n  } else {\n    const {\n      userDetails\n    } = response === null || response === void 0 ? void 0 : response.data;\n    localStorage.setItem(\"unverifiedUser\", JSON.stringify(userDetails));\n    console.log(\"register action\", localStorage.getItem(\"unverifiedUser\"));\n    dispatch(setVerifiedUserDetails(userDetails));\n  }\n});\nexport const verify = createAsyncThunk(\"auth/verify\", async ({\n  userDetails,\n  history\n}, {\n  dispatch\n}) => {\n  const response = await api.verify(userDetails);\n  if (response.error) {\n    var _response$exception3, _response$exception3$;\n    dispatch(openAlertMessage(response === null || response === void 0 ? void 0 : (_response$exception3 = response.exception) === null || _response$exception3 === void 0 ? void 0 : (_response$exception3$ = _response$exception3.response) === null || _response$exception3$ === void 0 ? void 0 : _response$exception3$.data));\n  } else {\n    const {\n      userDetails\n    } = response.data;\n    localStorage.setItem(\"user\", JSON.stringify(userDetails));\n    dispatch(setUserDetails(userDetails));\n    history.push(\"/dashboard\");\n  }\n});\nexport const {\n  setUserDetails,\n  setVerifiedUserDetails\n} = authSlice.actions;\nexport default authSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","api","openAlertMessage","authSlice","name","initialState","userDetails","error","loading","reducers","setUserDetails","state","action","payload","setUnverifiedUserDetails","setVerifiedUserDetails","extraReducers","builder","addCase","login","pending","fulfilled","rejected","message","history","dispatch","response","_response$exception","_response$exception$r","exception","data","localStorage","setItem","JSON","stringify","push","register","_response$exception2","_response$exception2$","console","log","getItem","verify","_response$exception3","_response$exception3$","actions","reducer"],"sources":["/home/abdelrahman/Realtime-project/client/Real-Time-Lecturing-Client/client/src/store/authSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport * as api from \"../api\";\nimport { openAlertMessage } from \"./alertSlice\";\n\nexport const authSlice = createSlice({\n  name: \"auth\",\n  initialState: {\n    userDetails: null,\n    error: null,\n    loading: false,\n  },\n  reducers: {\n    setUserDetails: (state, action) => {\n      state.setUserDetails = action.payload;\n    },\n    setUnverifiedUserDetails: (state, action) => {\n      state.setVerifiedUserDetails = action.payload;\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(login.pending, (state) => {\n        state.loading = true;\n        state.error = null;\n      })\n      .addCase(login.fulfilled, (state, action) => {\n        state.loading = false;\n        state.userDetails = action.payload;\n      })\n      .addCase(login.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.error.message;\n      });\n  },\n});\n\nexport const login = createAsyncThunk(\n  \"auth/login\",\n  async ({ userDetails, history }, { dispatch }) => {\n    const response = await api.login(userDetails);\n    if (response.error) {\n      dispatch(openAlertMessage(response?.exception?.response?.data));\n    } else {\n      const { userDetails } = response?.data;\n      localStorage.setItem(\"user\", JSON.stringify(userDetails));\n      dispatch(setUserDetails(userDetails));\n\n      history.push(\"/dashboard\");\n    }\n  }\n);\n\nexport const register = createAsyncThunk(\n  \"auth/register\",\n  async (userDetails, { dispatch }) => {\n    const response = await api.register(userDetails);\n    if (response.error) {\n      dispatch(openAlertMessage(response?.exception?.response?.data));\n    } else {\n      const { userDetails } = response?.data;\n      localStorage.setItem(\"unverifiedUser\", JSON.stringify(userDetails));\n      console.log(\"register action\", localStorage.getItem(\"unverifiedUser\"));\n      dispatch(setVerifiedUserDetails(userDetails));\n    }\n  }\n);\n\nexport const verify = createAsyncThunk(\n  \"auth/verify\",\n  async ({ userDetails, history }, { dispatch }) => {\n    const response = await api.verify(userDetails);\n    if (response.error) {\n      dispatch(openAlertMessage(response?.exception?.response?.data));\n    } else {\n      const { userDetails } = response.data;\n      localStorage.setItem(\"user\", JSON.stringify(userDetails));\n      dispatch(setUserDetails(userDetails));\n      history.push(\"/dashboard\");\n    }\n  }\n);\n\nexport const { setUserDetails, setVerifiedUserDetails } = authSlice.actions;\n\nexport default authSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}