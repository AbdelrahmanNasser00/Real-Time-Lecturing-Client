{"ast":null,"code":"import axios from\"axios\";import{logout}from\"./shared/utils/auth\";const apiClient=axios.create({baseURL:\"https://realtime-lecturing-api.onrender.com/api\",timeout:5000});apiClient.interceptors.request.use(config=>{const userDetails=localStorage.getItem(\"user\");if(userDetails){const token=JSON.parse(userDetails).token;config.headers.Authorization=\"Bearer \".concat(token);}return config;},err=>{return Promise.reject(err);});// public routes\nexport const login=async data=>{try{return await apiClient.post(\"/auth/login\",data);}catch(exception){return{error:true,exception};}};export const register=async data=>{try{return await apiClient.post(\"/auth/register\",data);}catch(exception){return{error:true,exception};}};export const verify=async data=>{try{return await apiClient.post(\"/auth/verify\",data);}catch(exception){return{error:true,exception};}};// secure routes\nexport const sendFriendInvitation=async data=>{try{return await apiClient.post(\"/friend-invitation/invite\",data);}catch(exception){checkResponseCode(exception);return{error:true,exception};}};export const acceptFriendInvitation=async data=>{try{return await apiClient.post(\"/friend-invitation/accept\",data);}catch(exception){checkResponseCode(exception);return{error:true,exception};}};export const rejectFriendInvitation=async data=>{try{return await apiClient.post(\"/friend-invitation/reject\",data);}catch(exception){checkResponseCode(exception);return{error:true,exception};}};const checkResponseCode=exception=>{var _exception$response;const responseCode=exception===null||exception===void 0?void 0:(_exception$response=exception.response)===null||_exception$response===void 0?void 0:_exception$response.status;if(responseCode){(responseCode===401||responseCode===403)&&logout();}};","map":{"version":3,"names":["axios","logout","apiClient","create","baseURL","timeout","interceptors","request","use","config","userDetails","localStorage","getItem","token","JSON","parse","headers","Authorization","concat","err","Promise","reject","login","data","post","exception","error","register","verify","sendFriendInvitation","checkResponseCode","acceptFriendInvitation","rejectFriendInvitation","_exception$response","responseCode","response","status"],"sources":["/home/abdelrahman/Documents/client-deployment-2/Real-Time-Lecturing-Client/client/src/api.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { logout } from \"./shared/utils/auth\";\r\n\r\nconst apiClient = axios.create({\r\n  baseURL: \"https://realtime-lecturing-api.onrender.com/api\",\r\n  timeout: 5000,\r\n});\r\n\r\napiClient.interceptors.request.use(\r\n  (config) => {\r\n    const userDetails = localStorage.getItem(\"user\");\r\n\r\n    if (userDetails) {\r\n      const token = JSON.parse(userDetails).token;\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n\r\n    return config;\r\n  },\r\n  (err) => {\r\n    return Promise.reject(err);\r\n  }\r\n);\r\n\r\n// public routes\r\n\r\nexport const login = async (data) => {\r\n  try {\r\n    return await apiClient.post(\"/auth/login\", data);\r\n  } catch (exception) {\r\n    return {\r\n      error: true,\r\n      exception,\r\n    };\r\n  }\r\n};\r\n\r\nexport const register = async (data) => {\r\n  try {\r\n    return await apiClient.post(\"/auth/register\", data);\r\n  } catch (exception) {\r\n    return {\r\n      error: true,\r\n      exception,\r\n    };\r\n  }\r\n};\r\n\r\nexport const verify = async (data) => {\r\n  try {\r\n    return await apiClient.post(\"/auth/verify\", data);\r\n  } catch (exception) {\r\n    return {\r\n      error: true,\r\n      exception,\r\n    };\r\n  }\r\n};\r\n\r\n// secure routes\r\nexport const sendFriendInvitation = async (data) => {\r\n  try {\r\n    return await apiClient.post(\"/friend-invitation/invite\", data);\r\n  } catch (exception) {\r\n    checkResponseCode(exception);\r\n    return {\r\n      error: true,\r\n      exception,\r\n    };\r\n  }\r\n};\r\n\r\nexport const acceptFriendInvitation = async (data) => {\r\n  try {\r\n    return await apiClient.post(\"/friend-invitation/accept\", data);\r\n  } catch (exception) {\r\n    checkResponseCode(exception);\r\n    return {\r\n      error: true,\r\n      exception,\r\n    };\r\n  }\r\n};\r\n\r\nexport const rejectFriendInvitation = async (data) => {\r\n  try {\r\n    return await apiClient.post(\"/friend-invitation/reject\", data);\r\n  } catch (exception) {\r\n    checkResponseCode(exception);\r\n    return {\r\n      error: true,\r\n      exception,\r\n    };\r\n  }\r\n};\r\n\r\nconst checkResponseCode = (exception) => {\r\n  const responseCode = exception?.response?.status;\r\n\r\n  if (responseCode) {\r\n    (responseCode === 401 || responseCode === 403) && logout();\r\n  }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}