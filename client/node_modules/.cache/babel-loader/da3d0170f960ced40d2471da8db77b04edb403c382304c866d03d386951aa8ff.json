{"ast":null,"code":"var _jsxFileName = \"/home/abdelrahman/Realtime-project/client/Real-Time-Lecturing-Client/client/src/Dashboard/Room/RoomButtons/ScreenShareButton.js\",\n  _s = $RefreshSig$();\nimport IconButton from \"@mui/material/IconButton\";\nimport ScreenShareIcon from \"@mui/icons-material/ScreenShare\";\nimport StopScreenShareIcon from \"@mui/icons-material/StopScreenShare\";\nimport * as webRTCHandler from \"../../../realtimeCommunication/webRTCHandler\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setScreenSharingStream } from \"../../../store/roomSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst constraints = {\n  audio: false,\n  video: true\n};\nconst ScreenShareButton = () => {\n  _s();\n  const dispatch = useDispatch();\n  const localStream = useSelector(state => state.room.localStreamId);\n  const screenSharingStream = useSelector(state => state.room.screenSharingStream);\n  const isScreenSharingActive = useSelector(state => state.room.isScreenSharingActive);\n  const handleScreenShareToggle = async () => {\n    if (!isScreenSharingActive) {\n      let stream = null;\n      try {\n        stream = await navigator.mediaDevices.getDisplayMedia(constraints);\n      } catch (err) {\n        console.log(\"error occured when trying to get an access to screen share stream\");\n      }\n      if (stream) {\n        dispatch(setScreenSharingStream(stream));\n        webRTCHandler.switchOutgoingTracks(stream);\n      }\n    } else {\n      webRTCHandler.switchOutgoingTracks(localStream);\n      screenSharingStream.getTracks().forEach(t => t.stop());\n      dispatch(setScreenSharingStream(null));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(IconButton, {\n    onClick: handleScreenShareToggle,\n    style: {\n      color: \"white\"\n    },\n    children: isScreenSharingActive ? /*#__PURE__*/_jsxDEV(StopScreenShareIcon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 32\n    }, this) : /*#__PURE__*/_jsxDEV(ScreenShareIcon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 58\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n_s(ScreenShareButton, \"1Ecm6B9iXEwwyf0mMOAQYHLQ5lM=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector];\n});\n_c = ScreenShareButton;\nexport default ScreenShareButton;\nvar _c;\n$RefreshReg$(_c, \"ScreenShareButton\");","map":{"version":3,"names":["IconButton","ScreenShareIcon","StopScreenShareIcon","webRTCHandler","useDispatch","useSelector","setScreenSharingStream","jsxDEV","_jsxDEV","constraints","audio","video","ScreenShareButton","_s","dispatch","localStream","state","room","localStreamId","screenSharingStream","isScreenSharingActive","handleScreenShareToggle","stream","navigator","mediaDevices","getDisplayMedia","err","console","log","switchOutgoingTracks","getTracks","forEach","t","stop","onClick","style","color","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/abdelrahman/Realtime-project/client/Real-Time-Lecturing-Client/client/src/Dashboard/Room/RoomButtons/ScreenShareButton.js"],"sourcesContent":["import IconButton from \"@mui/material/IconButton\";\r\nimport ScreenShareIcon from \"@mui/icons-material/ScreenShare\";\r\nimport StopScreenShareIcon from \"@mui/icons-material/StopScreenShare\";\r\nimport * as webRTCHandler from \"../../../realtimeCommunication/webRTCHandler\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setScreenSharingStream } from \"../../../store/roomSlice\";\r\n\r\nconst constraints = {\r\n  audio: false,\r\n  video: true,\r\n};\r\n\r\nconst ScreenShareButton = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const localStream = useSelector((state) => state.room.localStreamId);\r\n  const screenSharingStream = useSelector(\r\n    (state) => state.room.screenSharingStream\r\n  );\r\n  const isScreenSharingActive = useSelector(\r\n    (state) => state.room.isScreenSharingActive\r\n  );\r\n\r\n  const handleScreenShareToggle = async () => {\r\n    if (!isScreenSharingActive) {\r\n      let stream = null;\r\n      try {\r\n        stream = await navigator.mediaDevices.getDisplayMedia(constraints);\r\n      } catch (err) {\r\n        console.log(\r\n          \"error occured when trying to get an access to screen share stream\"\r\n        );\r\n      }\r\n\r\n      if (stream) {\r\n        dispatch(setScreenSharingStream(stream));\r\n        webRTCHandler.switchOutgoingTracks(stream);\r\n      }\r\n    } else {\r\n      webRTCHandler.switchOutgoingTracks(localStream);\r\n      screenSharingStream.getTracks().forEach((t) => t.stop());\r\n      dispatch(setScreenSharingStream(null));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <IconButton onClick={handleScreenShareToggle} style={{ color: \"white\" }}>\r\n      {isScreenSharingActive ? <StopScreenShareIcon /> : <ScreenShareIcon />}\r\n    </IconButton>\r\n  );\r\n};\r\n\r\nexport default ScreenShareButton;\r\n"],"mappings":";;AAAA,OAAOA,UAAU,MAAM,0BAA0B;AACjD,OAAOC,eAAe,MAAM,iCAAiC;AAC7D,OAAOC,mBAAmB,MAAM,qCAAqC;AACrE,OAAO,KAAKC,aAAa,MAAM,8CAA8C;AAC7E,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,sBAAsB,QAAQ,0BAA0B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElE,MAAMC,WAAW,GAAG;EAClBC,KAAK,EAAE,KAAK;EACZC,KAAK,EAAE;AACT,CAAC;AAED,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC9B,MAAMC,QAAQ,GAAGV,WAAW,CAAC,CAAC;EAE9B,MAAMW,WAAW,GAAGV,WAAW,CAAEW,KAAK,IAAKA,KAAK,CAACC,IAAI,CAACC,aAAa,CAAC;EACpE,MAAMC,mBAAmB,GAAGd,WAAW,CACpCW,KAAK,IAAKA,KAAK,CAACC,IAAI,CAACE,mBACxB,CAAC;EACD,MAAMC,qBAAqB,GAAGf,WAAW,CACtCW,KAAK,IAAKA,KAAK,CAACC,IAAI,CAACG,qBACxB,CAAC;EAED,MAAMC,uBAAuB,GAAG,MAAAA,CAAA,KAAY;IAC1C,IAAI,CAACD,qBAAqB,EAAE;MAC1B,IAAIE,MAAM,GAAG,IAAI;MACjB,IAAI;QACFA,MAAM,GAAG,MAAMC,SAAS,CAACC,YAAY,CAACC,eAAe,CAAChB,WAAW,CAAC;MACpE,CAAC,CAAC,OAAOiB,GAAG,EAAE;QACZC,OAAO,CAACC,GAAG,CACT,mEACF,CAAC;MACH;MAEA,IAAIN,MAAM,EAAE;QACVR,QAAQ,CAACR,sBAAsB,CAACgB,MAAM,CAAC,CAAC;QACxCnB,aAAa,CAAC0B,oBAAoB,CAACP,MAAM,CAAC;MAC5C;IACF,CAAC,MAAM;MACLnB,aAAa,CAAC0B,oBAAoB,CAACd,WAAW,CAAC;MAC/CI,mBAAmB,CAACW,SAAS,CAAC,CAAC,CAACC,OAAO,CAAEC,CAAC,IAAKA,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC;MACxDnB,QAAQ,CAACR,sBAAsB,CAAC,IAAI,CAAC,CAAC;IACxC;EACF,CAAC;EAED,oBACEE,OAAA,CAACR,UAAU;IAACkC,OAAO,EAAEb,uBAAwB;IAACc,KAAK,EAAE;MAAEC,KAAK,EAAE;IAAQ,CAAE;IAAAC,QAAA,EACrEjB,qBAAqB,gBAAGZ,OAAA,CAACN,mBAAmB;MAAAoC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,gBAAGjC,OAAA,CAACP,eAAe;MAAAqC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC5D,CAAC;AAEjB,CAAC;AAAC5B,EAAA,CAtCID,iBAAiB;EAAA,QACJR,WAAW,EAERC,WAAW,EACHA,WAAW,EAGTA,WAAW;AAAA;AAAAqC,EAAA,GAPrC9B,iBAAiB;AAwCvB,eAAeA,iBAAiB;AAAC,IAAA8B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}