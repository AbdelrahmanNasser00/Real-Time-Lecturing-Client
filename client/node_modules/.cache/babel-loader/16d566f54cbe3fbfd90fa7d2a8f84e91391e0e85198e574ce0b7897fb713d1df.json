{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport * as api from \"../api\";\nimport { openAlertMessage } from \"./alertSlice\";\nexport const authSlice = createSlice({\n  name: \"auth\",\n  initialState: {\n    userDetails: null,\n    error: null,\n    loading: false\n  },\n  reducers: {\n    setUserDetails: (state, action) => {\n      state.setUserDetails = action.payload;\n    },\n    setUnverifiedUserDetails: (state, action) => {\n      state.setVerifiedUserDetails = action.payload;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(login.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(login.fulfilled, (state, action) => {\n      state.loading = false;\n      state.userDetails = action.payload;\n    }).addCase(login.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.error.message;\n    });\n  }\n});\nexport const login = createAsyncThunk(\"auth/login\", async ({\n  userDetails,\n  history\n}) => {\n  const response = await api.login(userDetails);\n  console.log(response);\n  if (response.error) {\n    dispatch(openAlertMessage(\"Login failed\"));\n  } else {\n    const {\n      userDetails\n    } = response === null || response === void 0 ? void 0 : response.data;\n    console.log(\"userDetails\", userDetails);\n    localStorage.setItem(\"user\", JSON.stringify(userDetails));\n    dispatch(setUserDetails(userDetails));\n    history.push(\"/dashboard\");\n  }\n});\nexport const register = createAsyncThunk(\"auth/register\", async (userDetails, {\n  dispatch\n}) => {\n  const response = await api.register(userDetails);\n  if (response.error) {\n    dispatch(openAlertMessage(\"Registeration failed\"));\n  } else {\n    const {\n      userDetails\n    } = response === null || response === void 0 ? void 0 : response.data;\n    localStorage.setItem(\"unverifiedUser\", JSON.stringify(userDetails));\n    console.log(\"register actoin\", localStorage.getItem(\"unverifiedUser\"));\n    dispatch(setVerifiedUserDetails(userDetails));\n  }\n});\nexport const verify = createAsyncThunk(\"auth/verify\", async (userDetails, history, {\n  dispatch\n}) => {\n  const response = await api.verify(userDetails);\n  if (response.error) {\n    dispatch(openAlertMessage(\"Verification failed\"));\n  } else {\n    const {\n      userDetails\n    } = response.data;\n    localStorage.setItem(\"user\", JSON.stringify(userDetails));\n    dispatch(setUserDetails(userDetails));\n    history.push(\"/dashboard\");\n  }\n});\nexport const {\n  setUserDetails,\n  setVerifiedUserDetails\n} = authSlice.actions;\nexport default authSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","api","openAlertMessage","authSlice","name","initialState","userDetails","error","loading","reducers","setUserDetails","state","action","payload","setUnverifiedUserDetails","setVerifiedUserDetails","extraReducers","builder","addCase","login","pending","fulfilled","rejected","message","history","response","console","log","dispatch","data","localStorage","setItem","JSON","stringify","push","register","getItem","verify","actions","reducer"],"sources":["/home/abdelrahman/Documents/Realtime-project/client/Real-Time-Lecturing-Client/client/src/store/authSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport * as api from \"../api\";\nimport { openAlertMessage } from \"./alertSlice\";\n\nexport const authSlice = createSlice({\n  name: \"auth\",\n  initialState: {\n    userDetails: null,\n    error: null,\n    loading: false,\n  },\n  reducers: {\n    setUserDetails: (state, action) => {\n      state.setUserDetails = action.payload;\n    },\n    setUnverifiedUserDetails: (state, action) => {\n      state.setVerifiedUserDetails = action.payload;\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(login.pending, (state) => {\n        state.loading = true;\n        state.error = null;\n      })\n      .addCase(login.fulfilled, (state, action) => {\n        state.loading = false;\n        state.userDetails = action.payload;\n      })\n      .addCase(login.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.error.message;\n      });\n  },\n});\n\nexport const login = createAsyncThunk(\n  \"auth/login\",\n  async ({ userDetails, history }) => {\n    const response = await api.login(userDetails);\n    console.log(response);\n    if (response.error) {\n      dispatch(openAlertMessage(\"Login failed\"));\n    } else {\n      const { userDetails } = response?.data;\n      console.log(\"userDetails\", userDetails);\n      localStorage.setItem(\"user\", JSON.stringify(userDetails));\n      dispatch(setUserDetails(userDetails));\n      history.push(\"/dashboard\");\n    }\n  }\n);\n\nexport const register = createAsyncThunk(\n  \"auth/register\",\n  async (userDetails, { dispatch }) => {\n    const response = await api.register(userDetails);\n    if (response.error) {\n      dispatch(openAlertMessage(\"Registeration failed\"));\n    } else {\n      const { userDetails } = response?.data;\n      localStorage.setItem(\"unverifiedUser\", JSON.stringify(userDetails));\n      console.log(\"register actoin\", localStorage.getItem(\"unverifiedUser\"));\n      dispatch(setVerifiedUserDetails(userDetails));\n    }\n  }\n);\n\nexport const verify = createAsyncThunk(\n  \"auth/verify\",\n  async (userDetails, history, { dispatch }) => {\n    const response = await api.verify(userDetails);\n    if (response.error) {\n      dispatch(openAlertMessage(\"Verification failed\"));\n    } else {\n      const { userDetails } = response.data;\n      localStorage.setItem(\"user\", JSON.stringify(userDetails));\n      dispatch(setUserDetails(userDetails));\n      history.push(\"/dashboard\");\n    }\n  }\n);\n\nexport const { setUserDetails, setVerifiedUserDetails } = authSlice.actions;\n\nexport default authSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}