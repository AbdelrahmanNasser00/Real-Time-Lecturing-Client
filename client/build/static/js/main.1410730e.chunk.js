(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{161:function(e,t,r){},198:function(e,t){},200:function(e,t){},210:function(e,t,r){},211:function(e,t,r){"use strict";r.r(t);var n=r(0),s=r.n(n),a=r(35),o=r.n(a),i=(r(161),r(52)),c=r(16),l=r(276),d=r(258),j=r(1);const h=Object(d.a)("div")({width:"100%",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#5865F2"});var b=e=>Object(j.jsx)(h,{children:Object(j.jsx)(l.a,{sx:{width:700,height:400,bgcolor:"#36393f",borderRadius:"5px",boxShadow:"0 2px 10px 0 rgb(0 0 0 / 20%)",display:"flex",flexDirection:"column",padding:"25px"},children:e.children})}),u=r(274);var x=e=>{let{label:t,additionalStyles:r,disabled:n,onClick:s}=e;return Object(j.jsx)(u.a,{variant:"contained",sx:{bgcolor:"#5865F2",color:"white",textTransform:"none",fontSize:"16px",fontWeight:500,width:"100%",height:"40px"},style:r||{},disabled:n,onClick:s,children:t})},p=r(221);const m=Object(d.a)("span")({color:"#00AFF4",fontWeight:500,cursor:"pointer"});var O=e=>{let{text:t,redirectText:r,additionalStyles:n,redirectHandler:s}=e;return Object(j.jsxs)(p.a,{sx:{color:"#72767d"},style:n||{},variant:"subtitle2",children:[t,Object(j.jsx)(m,{onClick:s,children:r})]})},g=r(267);var v=e=>{let{handleLogin:t,isFormValid:r}=e;const n=Object(c.g)();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(g.a,{title:r?"Press to log in!":"Enter correct e-mail address and password should contains between 6 and 12 characters",children:Object(j.jsx)("div",{children:Object(j.jsx)(x,{label:"Log in",additionalStyles:{marginTop:"30px"},disabled:!r,onClick:t})})}),Object(j.jsx)(O,{text:"Need an account? ",redirectText:"Create an account",additionalStyles:{marginTop:"5px"},redirectHandler:()=>{n.push("/register")}})]})};var S=()=>Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(p.a,{variant:"h5",sx:{color:"white"},children:"Welcome Back!"}),Object(j.jsx)(p.a,{sx:{color:"#b9bbbe"},children:"We are happy that you are with us!"})]});const f=Object(d.a)("div")({display:"flex",justifyContent:"center",flexDirection:"column",width:"100%"}),y=Object(d.a)("p")({color:"#b9bbbe",textTransform:"uppercase",fontWeight:"600",fontSize:"16px"}),w=Object(d.a)("input")({flexGrow:1,height:"40px",border:"1px solid black",borderRadius:"5px",color:"#dcddde",background:"#35393f",margin:0,fontSize:"16px",padding:"0 5px"});var E=e=>{const{value:t,setValue:r,label:n,type:s,placeholder:a}=e;return Object(j.jsxs)(f,{children:[Object(j.jsx)(y,{children:n}),Object(j.jsx)(w,{value:t,onChange:e=>{r(e.target.value)},type:s,placeholder:a})]})};var I=e=>{let{mail:t,setMail:r,password:n,setPassword:s}=e;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(E,{value:t,setValue:r,label:"E-mail",type:"text",placeholder:"Enter e-mail address"}),Object(j.jsx)(E,{value:n,setValue:s,label:"Password",type:"password",placeholder:"Enter password"})]})};const R=e=>e.length>5&&e.length<13,T=e=>/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(e),C=e=>e.length>2&&e.length<13;var k=r(14),A=r(122);const U=()=>{localStorage.clear(),window.location.pathname="/login"},M=r.n(A).a.create({baseURL:"http://localhost:8080/api",timeout:1e3});M.interceptors.request.use((e=>{const t=localStorage.getItem("user");if(t){const r=JSON.parse(t).token;e.headers.Authorization="Bearer ".concat(r)}return e}),(e=>Promise.reject(e)));const _=e=>{var t;const r=null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status;r&&(401===r||403===r)&&U()},D={OPEN_ALERT_MESSAGE:"ALERT.OPEN_ALERT_MESSAGE",CLOSE_ALERT_MESSAGE:"ALERT.CLOSE_ALERT_MESSAGE"},F=e=>({openAlertMessage:t=>e(L(t)),closeAlertMessage:()=>e(N())}),L=e=>({type:D.OPEN_ALERT_MESSAGE,content:e}),N=()=>({type:D.CLOSE_ALERT_MESSAGE});var P=D;const z="AUTH.SET_USER_DETAILS",W=e=>({login:(t,r)=>e(V(t,r)),register:(t,r)=>e(G(t,r)),setUserDetails:t=>e(H(t))}),H=e=>({type:z,userDetails:e}),V=(e,t)=>async r=>{const n=await(async e=>{try{return await M.post("/auth/login",e)}catch(t){return{error:!0,exception:t}}})(e);if(console.log(n),n.error){var s,a;r(L(null===n||void 0===n||null===(s=n.exception)||void 0===s||null===(a=s.response)||void 0===a?void 0:a.data))}else{const{userDetails:e}=null===n||void 0===n?void 0:n.data;localStorage.setItem("user",JSON.stringify(e)),r(H(e)),t.push("/dashboard")}},G=(e,t)=>async r=>{const n=await(async e=>{try{return await M.post("/auth/register",e)}catch(t){return{error:!0,exception:t}}})(e);if(console.log(n),n.error){var s,a;r(L(null===n||void 0===n||null===(s=n.exception)||void 0===s||null===(a=s.response)||void 0===a?void 0:a.data))}else{const{userDetails:e}=null===n||void 0===n?void 0:n.data;localStorage.setItem("user",JSON.stringify(e)),r(H(e)),t.push("/dashboard")}};var J=Object(k.b)(null,(e=>({...W(e)})))((e=>{let{login:t}=e;const r=Object(c.g)(),[s,a]=Object(n.useState)(""),[o,i]=Object(n.useState)(""),[l,d]=Object(n.useState)(!1);Object(n.useEffect)((()=>{d((e=>{let{mail:t,password:r}=e;const n=T(t),s=R(r);return n&&s})({mail:s,password:o}))}),[s,o,d]);return Object(j.jsxs)(b,{children:[Object(j.jsx)(S,{}),Object(j.jsx)(I,{mail:s,setMail:a,password:o,setPassword:i}),Object(j.jsx)(v,{isFormValid:l,handleLogin:()=>{t({mail:s,password:o},r)}})]})}));var B=e=>{const{mail:t,setMail:r,username:n,setUsername:s,password:a,setPassword:o}=e;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(E,{value:t,setValue:r,label:"E-mail address",type:"text",placeholder:"Enter e-mail address"}),Object(j.jsx)(E,{value:n,setValue:s,label:"Username",type:"text",placeholder:"Enter a username"}),Object(j.jsx)(E,{value:a,setValue:o,label:"Password",type:"password",placeholder:"Enter password"})]})};var Z=e=>{let{handleRegister:t,isFormValid:r}=e;const n=Object(c.g)();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(g.a,{title:r?"Press to register!":"Username should contains between 3 and 12 characters and password should contains between 6 and 12 character. Also correct e-mail address should provided",children:Object(j.jsx)("div",{children:Object(j.jsx)(x,{label:"Register",additionalStyles:{marginTop:"30px"},disabled:!r,onClick:t})})}),Object(j.jsx)(O,{text:"",redirectText:"Already have an account ?",additionalStyles:{marginTop:"5px"},redirectHandler:()=>{n.push("/login")}})]})};var $=Object(k.b)(null,(e=>({...W(e)})))((e=>{let{register:t}=e;const r=Object(c.g)(),[s,a]=Object(n.useState)(""),[o,i]=Object(n.useState)(""),[l,d]=Object(n.useState)(""),[h,u]=Object(n.useState)(!1);return Object(n.useEffect)((()=>{u((e=>{let{mail:t,password:r,username:n}=e;return T(t)&&R(r)&&C(n)})({mail:s,username:o,password:l}))}),[s,o,l,u]),Object(j.jsxs)(b,{children:[Object(j.jsx)(p.a,{variant:"h5",sx:{color:"white "},children:"Create an account"}),Object(j.jsx)(B,{mail:s,setMail:a,username:o,setUsername:i,password:l,setPassword:d}),Object(j.jsx)(Z,{handleRegister:()=>{t({mail:s,password:l,username:o},r)},isFormValid:h})]})})),q=r(123),K=r.n(q);var Q=()=>Object(j.jsx)(u.a,{style:{width:"48px",height:"48px",borderRadius:"16px",margin:0,padding:0,minWidth:0,marginTop:"10px",color:"white",backgroundColor:"#5865F2"},children:Object(j.jsx)(K.a,{})}),X=r(128),Y=r.n(X),ee=r(124),te=r(67),re=r(125);const ne={userDetails:null};var se=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;return t.type===z?{...e,userDetails:t.userDetails}:e};const ae={showAlertMessage:!1,alertMessageContent:null};var oe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.OPEN_ALERT_MESSAGE:return{...e,showAlertMessage:!0,alertMessageContent:t.content};case P.CLOSE_ALERT_MESSAGE:return{...e,showAlertMessage:!1,alertMessageContent:null};default:return e}};const ie="FRIENDS.SET_FRIENDS",ce="FRIENDS.SET_PENDING_FRIENDS_INVITATIONS",le="FRIENDS.SET_ONLINE_USERS",de=e=>({sendFriendInvitation:(t,r)=>e(je(t,r)),acceptFriendInvitation:t=>e(he(t)),rejectFriendInvitation:t=>e(be(t))}),je=(e,t)=>async r=>{const n=await(async e=>{try{return await M.post("/friend-invitation/invite",e)}catch(t){return _(t),{error:!0,exception:t}}})(e);var s,a;n.error?r(L(null===(s=n.exception)||void 0===s||null===(a=s.response)||void 0===a?void 0:a.data)):(r(L("Invitation has been sent!")),t())},he=e=>async t=>{const r=await(async e=>{try{return await M.post("/friend-invitation/accept",e)}catch(t){return _(t),{error:!0,exception:t}}})(e);var n,s;r.error?t(L(null===(n=r.exception)||void 0===n||null===(s=n.response)||void 0===s?void 0:s.data)):t(L("Invitation accepted!"))},be=e=>async t=>{const r=await(async e=>{try{return await M.post("/friend-invitation/reject",e)}catch(t){return _(t),{error:!0,exception:t}}})(e);var n,s;r.error?t(L(null===(n=r.exception)||void 0===n||null===(s=n.response)||void 0===s?void 0:s.data)):t(L("Invitation rejected!"))},ue={friends:[],pendingFriendsInvitations:[],onlineUsers:[]};var xe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return{...e,pendingFriendsInvitations:t.pendingFriendsInvitations};case ie:return{...e,friends:t.friends};case le:return{...e,onlineUsers:t.onlineUsers};default:return e}};const pe="CHAT.SET_CHOSEN_CHAT_DETAILS",me="CHAT.SET_MESSAGES",Oe={chosenChatDetails:null,chatType:null,messages:[]};var ge=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pe:return{...e,chosenChatDetails:t.chatDetails,chatType:t.chatType,messages:[]};case me:return{...e,messages:t.messages};default:return e}};const ve="ROOM.OPEN_ROOM",Se="ROOM.SET_ROOM_DETAILS",fe="ROOM.SET_ACTIVE_ROOMS",ye="ROOM.SET_LOCAL_STREAM",we="ROOM.SET_REMOTE_STREAMS",Ee="ROOM.SET_SCREEN_SHARE_STREAM",Ie=function(){return{type:ve,isUserRoomCreator:arguments.length>0&&void 0!==arguments[0]&&arguments[0],isUserInRoom:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},Re=e=>({setScreenSharingStream:t=>{e(Ae(t))}}),Te=e=>({type:Se,roomDetails:e}),Ce=e=>({type:ye,localStream:e}),ke=e=>({type:we,remoteStreams:e}),Ae=e=>({type:Ee,isScreenSharingActive:!!e,screenSharingStream:e||null}),Ue={isUserInRoom:!1,isUserRoomCreator:!1,roomDetails:null,activeRooms:[],localStream:null,remoteStreams:[],screenSharingStream:null,isScreenSharingActive:!1};var Me=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve:return{...e,isUserInRoom:t.isUserInRoom,isUserRoomCreator:t.isUserRoomCreator};case Se:return{...e,roomDetails:t.roomDetails};case fe:return{...e,activeRooms:t.activeRooms};case ye:return{...e,localStream:t.localStream};case we:return{...e,remoteStreams:t.remoteStreams};case Ee:return{...e,screenSharingStream:t.screenSharingStream,isScreenSharingActive:t.isScreenSharingActive};default:return e}};const _e=Object(te.combineReducers)({auth:se,alert:oe,friends:xe,chat:ge,room:Me});var De=Object(te.createStore)(_e,Object(ee.composeWithDevTools)(Object(te.applyMiddleware)(re.a))),Fe=r(142),Le=r(127),Ne=r.n(Le);const Pe=e=>{navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((t=>{De.dispatch(Ce(t)),e()})).catch((e=>{console.log(e),console.log("Cannot get an access to local stream")}))};let ze={};const We=(e,t)=>{const r=De.getState().room.localStream;t?console.log("preparing new peer connection as initiator"):console.log("preparing new peer connection as not initiator"),ze[e]=new Ne.a({initiator:t,config:(console.warn("Using only STUN server"),{iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),stream:r}),ze[e].on("signal",(t=>{Be({signal:t,connUserSocketId:e})})),ze[e].on("stream",(t=>{console.log("remote stream came from other user"),console.log("direct connection has been established"),t.connUserSocketId=e,He(t)}))},He=e=>{const t=[...De.getState().room.remoteStreams,e];De.dispatch(ke(t))},Ve=e=>{for(let t in ze)for(let r in ze[t].streams[0].getTracks())for(let n in e.getTracks())if(ze[t].streams[0].getTracks()[r].kind===e.getTracks()[n].kind){ze[t].replaceTrack(ze[t].streams[0].getTracks()[r],e.getTracks()[n],ze[t].streams[0]);break}};let Ge=null;const Je=e=>{const t=e.token;Ge=Object(Fe.a)("http://localhost:8080",{auth:{token:t}}),Ge.on("connect",(()=>{console.log("succesfully connected with socket.io server"),console.log(Ge.id)})),Ge.on("friends-invitations",(e=>{const{pendingInvitations:t}=e;De.dispatch({type:ce,pendingFriendsInvitations:t})})),Ge.on("friends-list",(e=>{const{friends:t}=e;De.dispatch((e=>({type:ie,friends:e}))(t))})),Ge.on("online-users",(e=>{const{onlineUsers:t}=e;De.dispatch((e=>({type:le,onlineUsers:e}))(t))})),Ge.on("create-room",(e=>{$e(e)})),Ge.on("active-rooms",(e=>{qe(e)})),Ge.on("conn-prepare",(e=>{const{connUserSocketId:t}=e;We(t,!1),Ge.emit("initialze-connection",{connUserSocketId:t})})),Ge.on("initialze-connection",(e=>{const{connUserSocketId:t}=e;We(t,!0)})),Ge.on("conn-signal",(e=>{(e=>{const{connUserSocketId:t,signal:r}=e;ze[t]&&ze[t].signal(r)})(e)})),Ge.on("room-participant-left",(e=>{console.log("user left room"),(e=>{const{connUserSocketId:t}=e;ze[t]&&(ze[t].destroy(),delete ze[t]);const r=De.getState().room.remoteStreams.filter((e=>e.connUserSocketId!==t));De.dispatch(ke(r))})(e)}))},Be=e=>{Ge.emit("conn-signal",e)},Ze=()=>{Pe((()=>{De.dispatch(Ie(!0,!0)),Ge.emit("create-room")}))},$e=e=>{const{roomDetails:t}=e;De.dispatch(Te(t))},qe=e=>{var t;const{activeRooms:r}=e,n=De.getState().friends.friends,s=[],a=null===(t=De.getState().auth.userDetails)||void 0===t?void 0:t._id;r.forEach((e=>{e.roomCreator.userId===a?s.push({...e,creatorUsername:"Me"}):n.forEach((t=>{t.id===e.roomCreator.userId&&s.push({...e,creatorUsername:t.username})}))})),De.dispatch((e=>({type:fe,activeRooms:e}))(s))},Ke=e=>{Pe((()=>{var t;De.dispatch(Te({roomId:e})),De.dispatch(Ie(!1,!0)),t={roomId:e},Ge.emit("join-room",t)}))},Qe=()=>{const e=De.getState().room.roomDetails.roomId,t=De.getState().room.localStream;t&&(t.getTracks().forEach((e=>e.stop())),De.dispatch(Ce(null)));const r=De.getState().room.screenSharingStream;var n;r&&(r.getTracks().forEach((e=>e.stop())),De.dispatch(Ae(null))),De.dispatch(ke([])),Object.entries(ze).forEach((e=>{const t=e[0];ze[t]&&(ze[t].destroy(),delete ze[t])})),n={roomId:e},Ge.emit("leave-room",n),De.dispatch(Te(null)),De.dispatch(Ie(!1,!1))};var Xe=e=>{let{isUserInRoom:t}=e;return Object(j.jsx)(u.a,{disabled:t,onClick:()=>{Ze()},style:{width:"48px",height:"48px",borderRadius:"16px",margin:0,padding:0,minWidth:0,marginTop:"10px",color:"white",backgroundColor:"#5865F2"},children:Object(j.jsx)(Y.a,{})})};const Ye=Object(d.a)("div")({height:"42px",width:"42px",backgroundColor:"#5865f2",borderRadius:"42px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",fontWeight:"700",color:"white"});var et=e=>{let{username:t,large:r}=e;return Object(j.jsx)(Ye,{style:r?{height:"80px",width:"80px"}:{},children:t.substring(0,2)})};var tt=e=>{let{creatorUsername:t,roomId:r,amountOfParticipants:n,isUserInRoom:s}=e;const a=n>3,o="Cretor: ".concat(t,". Connected: ").concat(n);return Object(j.jsx)(g.a,{title:o,children:Object(j.jsx)("div",{children:Object(j.jsx)(u.a,{style:{width:"48px",height:"48px",borderRadius:"16px",margin:0,padding:0,minWidth:0,marginTop:"10px",color:"white",backgroundColor:"#5865F2"},disabled:a||s,onClick:()=>{n<4&&Ke(r)},children:Object(j.jsx)(et,{username:t})})})})};const rt=Object(d.a)("div")({width:"72px",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"#202225"});var nt=Object(k.b)((e=>{let{room:t}=e;return{...t}}))((e=>{let{activeRooms:t,isUserInRoom:r}=e;return Object(j.jsxs)(rt,{children:[Object(j.jsx)(Q,{}),Object(j.jsx)(Xe,{isUserInRoom:r}),t.map((e=>Object(j.jsx)(tt,{roomId:e.roomId,creatorUsername:e.creatorUsername,amountOfParticipants:e.participants.length,isUserInRoom:r},e.roomId)))]})})),st=r(279),at=r(266),ot=r(283),it=r(281),ct=r(282);var lt=Object(k.b)(null,(e=>({...de(e)})))((e=>{let{isDialogOpen:t,closeDialogHandler:r,sendFriendInvitation:s=(()=>{})}=e;const[a,o]=Object(n.useState)(""),[i,c]=Object(n.useState)(""),l=()=>{r(),o("")};return Object(n.useEffect)((()=>{c(T(a))}),[a,c]),Object(j.jsx)("div",{children:Object(j.jsxs)(st.a,{open:t,onClose:l,children:[Object(j.jsx)(at.a,{children:Object(j.jsx)(p.a,{children:"Invite a Friend"})}),Object(j.jsxs)(it.a,{children:[Object(j.jsx)(ct.a,{children:Object(j.jsx)(p.a,{children:"Enter e-mail address of friend which you would like to invite"})}),Object(j.jsx)(E,{label:"Mail",type:"text",value:a,setValue:o,placeholder:"Enter mail address"})]}),Object(j.jsx)(ot.a,{children:Object(j.jsx)(x,{onClick:()=>{s({targetMailAddress:a},l)},disabled:!i,label:"Send",additionalStyles:{marginLeft:"15px",marginRight:"15px",marginBottom:"10px"}})})]})})}));const dt={marginTop:"10px",marginLeft:"5px",width:"80%",height:"30px",background:"#3ba55d"};var jt=()=>{const[e,t]=Object(n.useState)(!1);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(x,{additionalStyles:dt,label:"Send Invitation",onClick:()=>{t(!0)}}),Object(j.jsx)(lt,{isDialogOpen:e,closeDialogHandler:()=>{t(!1)}})]})};var ht=e=>{let{title:t}=e;return Object(j.jsx)(p.a,{sx:{textTransform:"uppercase",color:"#8e9297",fontSize:"14px",marginTop:"10px"},children:t})},bt=r(129),ut=r.n(bt);var xt=()=>Object(j.jsx)(l.a,{sx:{color:"#3ba55d",display:"flex",alignItems:"center",position:"absolute",right:"5px"},children:Object(j.jsx)(ut.a,{})});var pt=e=>{let{id:t,username:r,isOnline:n}=e;return Object(j.jsxs)(u.a,{disabled:!0,style:{width:"100%",height:"42px",marginTop:"10px",display:"flex",alignItems:"center",justifyContent:"flex-start",textTransform:"none",color:"black",position:"relative"},children:[Object(j.jsx)(et,{username:r}),Object(j.jsx)(p.a,{style:{marginLeft:"7px",fontWeight:700,color:"#8e9297"},variant:"subtitle1",align:"left",children:r}),n&&Object(j.jsx)(xt,{})]})};const mt=Object(d.a)("div")({flexGrow:1,width:"100%"}),Ot=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.forEach((e=>{const r=t.find((t=>t.userId===e.id));e.isOnline=!!r})),e};var gt=Object(k.b)((e=>{let{friends:t}=e;return{...t}}))((e=>{let{friends:t,onlineUsers:r}=e;return Object(j.jsx)(mt,{children:Ot(t,r).map((e=>Object(j.jsx)(pt,{username:e.username,id:e.id,isOnline:e.isOnline},e.id)))})})),vt=r(130),St=r.n(vt),ft=r(131),yt=r.n(ft),wt=r(284);var Et=e=>{let{disabled:t,acceptInvitationHandler:r,rejectInvitationHandler:n}=e;return Object(j.jsxs)(l.a,{sx:{display:"flex"},children:[Object(j.jsx)(wt.a,{style:{color:"white"},disabled:t,onClick:r,children:Object(j.jsx)(St.a,{})}),Object(j.jsx)(wt.a,{style:{color:"white"},disabled:t,onClick:n,children:Object(j.jsx)(yt.a,{})})]})};var It=Object(k.b)(null,(e=>({...de(e)})))((e=>{let{id:t,username:r,mail:s,acceptFriendInvitation:a=(()=>{}),rejectFriendInvitation:o=(()=>{})}=e;const[i,c]=Object(n.useState)(!1);return Object(j.jsx)(g.a,{title:s,children:Object(j.jsx)("div",{style:{width:"100%"},children:Object(j.jsxs)(l.a,{sx:{width:"100%",height:"42px",marginTop:"10px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(j.jsx)(et,{username:r}),Object(j.jsx)(p.a,{sx:{marginLeft:"7px",fontWeight:700,color:"#8e9297",flexGrow:1},variant:"subtitle1",children:r}),Object(j.jsx)(Et,{disabled:i,acceptInvitationHandler:()=>{console.log(t),a({id:t}),c(!0)},rejectInvitationHandler:()=>{console.log(t),o({id:t}),c(!0)}})]})})})}));const Rt=Object(d.a)("div")({width:"100%",height:"22%",display:"flex",flexDirection:"column",alignItems:"center",overflow:"auto"});var Tt=Object(k.b)((e=>{let{friends:t}=e;return{...t}}))((e=>{let{pendingFriendsInvitations:t}=e;return Object(j.jsx)(Rt,{children:t.map((e=>Object(j.jsx)(It,{id:e._id,username:e.senderId.username,mail:e.senderId.mail},e._id)))})}));const Ct=Object(d.a)("div")({width:"224px",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"#2F3136"});var kt=()=>Object(j.jsxs)(Ct,{children:[Object(j.jsx)(jt,{}),Object(j.jsx)(ht,{title:"Enrolled Students"}),Object(j.jsx)(gt,{}),Object(j.jsx)(ht,{title:"Invitations"}),Object(j.jsx)(Tt,{})]}),At=r(269),Ut=r(273),Mt=r(132),_t=r.n(Mt);function Dt(){const[e,t]=s.a.useState(null),r=Boolean(e);return Object(j.jsxs)("div",{children:[Object(j.jsx)(wt.a,{onClick:e=>{t(e.currentTarget)},style:{color:"white"},children:Object(j.jsx)(_t.a,{})}),Object(j.jsx)(At.a,{id:"basic-menu",anchorEl:e,open:r,onClose:()=>{t(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:Object(j.jsx)(Ut.a,{onClick:U,children:"Logout"})})]})}var Ft=Object(k.b)((e=>{var t;return{name:null===(t=e.chat.chosenChatDetails)||void 0===t?void 0:t.name}}))((e=>{let{name:t}=e;return Object(j.jsx)(p.a,{sx:{fontSize:"16px",color:"white",fontWeight:"bold"},children:"".concat(t?"Chosen conversation: ".concat(t):"")})}));const Lt=Object(d.a)("div")({position:"absolute",right:"0",top:"0",height:"48px",borderBottom:"1px solid black",backgroundColor:"#36393f",width:"calc(100% - 326px)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 15px"});var Nt=()=>Object(j.jsxs)(Lt,{children:[Object(j.jsx)(Ft,{}),Object(j.jsx)(Dt,{})]}),Pt=r(134),zt=r.n(Pt),Wt=r(133),Ht=r.n(Wt);const Vt=Object(d.a)("div")({position:"absolute",bottom:"10px",right:"10px"});var Gt=e=>{let{isRoomMinimized:t,handleRoomResize:r}=e;return Object(j.jsx)(Vt,{children:Object(j.jsx)(wt.a,{style:{color:"white"},onClick:r,children:t?Object(j.jsx)(Ht.a,{}):Object(j.jsx)(zt.a,{})})})};const Jt=Object(d.a)("div")({height:"50%",width:"50%",backgroundColor:"black",borderRadius:"8px"}),Bt=Object(d.a)("video")({width:"100%",height:"100%"});var Zt=e=>{let{stream:t,isLocalStream:r}=e;const s=Object(n.useRef)();return Object(n.useEffect)((()=>{const e=s.current;e.srcObject=t,e.onloadedmetadata=()=>{e.play()}}),[t]),Object(j.jsx)(Jt,{children:Object(j.jsx)(Bt,{ref:s,autoPlay:!0,muted:!!r})})};const $t=Object(d.a)("div")({height:"85%",width:"100%",display:"flex",flexWrap:"wrap"});var qt=Object(k.b)((e=>{let{room:t}=e;return{...t}}))((e=>{let{localStream:t,remoteStreams:r,screenSharingStream:n}=e;return Object(j.jsxs)($t,{children:[Object(j.jsx)(Zt,{stream:n||t,isLocalStream:!0}),r.map((e=>Object(j.jsx)(Zt,{stream:e},e.id)))]})})),Kt=r(135),Qt=r.n(Kt),Xt=r(136),Yt=r.n(Xt);var er=e=>{let{localStream:t}=e;const[r,s]=Object(n.useState)(!0);return Object(j.jsx)(wt.a,{onClick:()=>{t.getVideoTracks()[0].enabled=!r,s(!r)},style:{color:"white"},children:r?Object(j.jsx)(Qt.a,{}):Object(j.jsx)(Yt.a,{})})},tr=r(137),rr=r.n(tr),nr=r(138),sr=r.n(nr);var ar=e=>{let{localStream:t}=e;const[r,s]=Object(n.useState)(!0);return Object(j.jsx)(wt.a,{onClick:()=>{t.getAudioTracks()[0].enabled=!r,s(!r)},style:{color:"white"},children:r?Object(j.jsx)(rr.a,{}):Object(j.jsx)(sr.a,{})})},or=r(139),ir=r.n(or);var cr=()=>Object(j.jsx)(wt.a,{onClick:()=>{Qe()},style:{color:"white"},children:Object(j.jsx)(ir.a,{})}),lr=r(141),dr=r.n(lr),jr=r(140),hr=r.n(jr);const br={audio:!1,video:!0};var ur=e=>{let{localStream:t,screenSharingStream:r,setScreenSharingStream:n,isScreenSharingActive:s}=e;return Object(j.jsx)(wt.a,{onClick:async()=>{if(s)Ve(t),r.getTracks().forEach((e=>e.stop())),n(null);else{let t=null;try{t=await navigator.mediaDevices.getDisplayMedia(br)}catch(e){console.log("error occured when trying to get an access to screen share stream")}t&&(n(t),Ve(t))}},style:{color:"white"},children:s?Object(j.jsx)(hr.a,{}):Object(j.jsx)(dr.a,{})})};const xr=Object(d.a)("div")({height:"15%",width:"100%",backgroundColor:"#5865f2",borderTopLeftRadius:"8px",borderTopRightRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"});var pr=Object(k.b)((e=>{let{room:t}=e;return{...t}}),(e=>({...Re(e)})))((e=>{const{localStream:t,isUserJoinedWithOnlyAudio:r}=e;return Object(j.jsxs)(xr,{children:[!r&&Object(j.jsx)(ur,{...e}),Object(j.jsx)(ar,{localStream:t}),Object(j.jsx)(cr,{}),!r&&Object(j.jsx)(er,{localStream:t})]})}));const mr=Object(d.a)("div")({position:"absolute",borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#202225"}),Or={width:"100%",height:"100vh"},gr={bottom:"0px",right:"0px",width:"30%",height:"40vh"};var vr=()=>{const[e,t]=Object(n.useState)(!0);return Object(j.jsxs)(mr,{style:e?gr:Or,children:[Object(j.jsx)(qt,{}),Object(j.jsx)(pr,{}),Object(j.jsx)(Gt,{isRoomMinimized:e,handleRoomResize:()=>{t(!e)}})]})};const Sr=Object(d.a)("div")({width:"100%",height:"100vh",display:"flex",backgroundColor:"#36393f"});var fr=Object(k.b)((e=>{let{room:t}=e;return{...t}}),(e=>({...W(e)})))((e=>{let{setUserDetails:t,isUserInRoom:r}=e;return Object(n.useEffect)((()=>{const e=localStorage.getItem("user");e?(t(JSON.parse(e)),Je(JSON.parse(e))):U()}),[t]),Object(j.jsxs)(Sr,{children:[Object(j.jsx)(nt,{}),Object(j.jsx)(kt,{}),Object(j.jsx)(Nt,{}),r&&Object(j.jsx)(vr,{})]})})),yr=r(270),wr=r(271);var Er=Object(k.b)((e=>{let{alert:t}=e;return{...t}}),(e=>({...F(e)})))((e=>{let{showAlertMessage:t,closeAlertMessage:r,alertMessageContent:n}=e;return Object(j.jsx)(wr.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:t,onClose:r,autoHideDuration:6e3,children:Object(j.jsx)(yr.a,{severity:"info",children:n})})}));r(210);var Ir=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(i.a,{children:Object(j.jsxs)(c.d,{children:[Object(j.jsx)(c.b,{exact:!0,path:"/login",children:Object(j.jsx)(J,{})}),Object(j.jsx)(c.b,{exact:!0,path:"/register",children:Object(j.jsx)($,{})}),Object(j.jsx)(c.b,{exact:!0,path:"/dashboard",children:Object(j.jsx)(fr,{})}),Object(j.jsx)(c.b,{path:"/",children:Object(j.jsx)(c.a,{to:"/dashboard"})})]})}),Object(j.jsx)(Er,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(j.jsx)(k.a,{store:De,children:Object(j.jsx)(Ir,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()}))}},[[211,1,2]]]);
//# sourceMappingURL=main.1410730e.chunk.js.map